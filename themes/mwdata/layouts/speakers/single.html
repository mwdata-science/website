{{- define "main" -}}

{{- $original := ((site.GetPage "/speakers").Resources.GetMatch (printf "*%s*" .Params.img_name)) -}}
{{- $new := "" -}}
{{- $new = $original.Fill "300x300" -}}

<h1>{{ .Title | markdownify }}</h1>
<img src="{{ $new.Permalink }}" alt="Speaker" class="img-speaker float-right" />
<h5>
{{ .Params.speaker_name }}


</h5>

<p>
{{ if .Params.twitter }}
<a href="https://twitter.com/{{ .Params.twitter }}" target="_blank">🐦 @{{ .Params.twitter }}</a>
{{ end }}
{{ if .Params.slides }}
<a href="{{ .Params.slides }}" target="_blank">🎞️ View slides</a>
{{ end }}
</p>

{{ .Content }}

<div style="clear: both"></div>


<h3>Program entries</h3>


{{ range sort (where (where (where site.RegularPages.ByDate "Section" "program-entries") "published" "!=" "false") "Params.speaker" "==" .File.ContentBaseName ) ".Params.program_slot" "asc" }}

  <a href="{{ .Permalink }}">

  <h1>{{ .Params.title }}</h1>
  <h5>{{ .Params.program_slot }}</h5>

  {{ if .Content }}
    <p>
    {{ .Content | truncate 300 }} <a href="{{ .Permalink }}">Read more »</a>
    </p>
  {{ end }}

{{else}}

<em>No program entries found - we are still working on the program.</em>

{{ end }}


{{ end }}



{{- define "twitter_image" -}}
{{ "/static/some_preview.png" | absURL }}
{{- end -}}

{{- define "itemprop_image" -}}
{{ "/static/some_preview.png" | absURL }}
{{- end -}}

{{- define "og_image" -}}
{{ "/static/some_preview.png" | absURL }}
{{- end -}}
